# OTP Service

Сервис для генерации и валидации одноразовых паролей (OTP) с различными каналами доставки.

## Функциональность

- Генерация одноразовых паролей (OTP)
- Различные каналы доставки OTP: Email, Telegram, File
- REST API для интеграции
- Аутентификация и авторизация через JWT
- Администрирование пользователей
- Настройка параметров OTP (длина, время жизни)

## Технологии

- Java 17
- PostgreSQL
- JWT для аутентификации
- Встроенный HTTP-сервер
- Интеграция с Telegram Bot API
- JavaMail для отправки электронной почты

## Запуск проекта

### Предварительные требования

- JDK 17+
- PostgreSQL
- Maven

### Настройка базы данных

```sql
CREATE DATABASE otp_service;
```

### Настройка конфигурации

1. Скопируйте файл `src/main/resources/application.properties.example` в `src/main/resources/application.properties`
2. Настройте параметры подключения к базе данных
3. Настройте параметры JWT
4. Настройте параметры каналов доставки (Email, Telegram)

### Сборка и запуск

```
mvn clean package
java -jar target/otp-service-1.0-SNAPSHOT-jar-with-dependencies.jar
```

## API Endpoints

### Аутентификация

- `POST /auth/register` - Регистрация нового пользователя
- `POST /auth/login` - Аутентификация и получение JWT токена

### Управление OTP

- `POST /otp/generate` - Генерация OTP
- `POST /otp/validate` - Валидация OTP

### Администрирование (требуется роль ADMIN)

- `GET /admin/config` - Получение конфигурации OTP
- `POST /admin/config/update` - Обновление конфигурации OTP
- `GET /admin/users` - Получение списка пользователей
- `DELETE /admin/users/{id}` - Удаление пользователя

## Каналы доставки

### Email

Отправка OTP на электронную почту. Требуется настройка SMTP-сервера.

### Telegram

Отправка OTP через Telegram бота. Требуется создание бота через @BotFather.

### File

Сохранение OTP в файл (для тестирования). OTP сохраняются в директорию `otp_files/`.

## Примечания по безопасности

- Обязательно замените значения по умолчанию в файле конфигурации
- Используйте сложный секретный ключ для JWT
- Для рабочего окружения рекомендуется использовать HTTPS 